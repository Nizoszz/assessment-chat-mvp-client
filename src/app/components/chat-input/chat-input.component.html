<form (submit)="onSubmit($event)" class="relative bg-background">
  <div class="container max-w-4xl mx-auto py-4 rounded-full">
    <div
      class="flex flex-col items-center gap-2 px-4 py-2 rounded-lg border bg-background"
    >
      <textarea
        [(ngModel)]="message"
        (keydown)="onKeyDown($event)"
        name="message"
        placeholder="Type a message..."
        class="w-full bg-transparent outline-none resize-none border-0 focus-visible:ring-0 focus-visible:ring-offset-0 p-2"
      ></textarea>
      <div class="flex justify-between items-center w-full">
        <app-file-upload-button
          [selectedFile]="selectedFile"
          (fileSelect)="onFileSelected($event)"
        ></app-file-upload-button>

        <button
          [disabled]="isProcessing || (!message.trim() && !selectedFile)"
          [ngClass]="{
            'btn-default': message.trim() || selectedFile,
            'btn-ghost': !(message.trim() || selectedFile)
          }"
          type="submit"
          class="cursor-pointer h-10 w-10 rounded-full flex justify-center items-center hover:bg-secondary border-[2px] border-border"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-5 w-5"
          >
            <path
              d="M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z"
            />
            <path d="M6 12h16" />
          </svg>
          <span class="sr-only">Send</span>
        </button>
      </div>
    </div>
  </div>
</form>
